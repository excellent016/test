webpackJsonp([20],{TDju:function(t,e){},mVZI:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Dd8w"),i=a.n(n),o={data:function(){return{loadingExcel:!1,pagination:{current:1,total:null,size:10},form:[],dialogFormVisible:!1,loading:!1,error:[],filter:null,date:"",subject:"",showRankData:!1,rank:[]}},created:function(){this.fromTable()},methods:{search:function(){var t=this,e=this.$jwtDecode(sessionStorage.getItem("token")).id;this.$axios({url:"http://110.41.45.5:21888/scoreApi/rank/"+this.pagination.current+"/"+this.pagination.size+"/"+e,method:"post",data:{studentId:e,subject:this.subject,date:this.date}}).then(function(e){t.loading=!1,t.rank=e.data.data.records,t.pagination=i()({},e.data.data);var a=[],n=t.error.map(function(t,e){var a={};return a.text=t.answerDate,a.value=t.answerDate,a}).reduce(function(t,e){return!a[e.text]&&(a[e.text]=t.push(e)),t},[]);t.filter=n})},exportExcel:function(){var t=this,e=this.$jwtDecode(sessionStorage.getItem("token")).id;this.loadingExcel=!0,this.$axios({headers:{"Content-Type":"application/json"},url:"http://110.41.45.5:21888/otherApi/export",method:"put",responseType:"blob",data:{studentId:e,subject:this.subject,date:this.date}}).then(function(e){t.loadingExcel=!1;var a=new Blob([e.data],{type:"application/xlsx"}),n=window.URL.createObjectURL(a),i=document.createElement("a");i.href=n,i.download="我的成绩.xlsx",i.click(),URL.revokeObjectURL(n),t.$message({type:"success",message:"导出成功"})}).catch(function(){t.loadingExcel=!1,t.$message({type:"error",message:"请求超时"})})},showRank:function(){this.showRankData=!this.showRankData},tran:function(t){return this.showRankData?t:"***"},showInfo:function(t){var e=this,a=this.$jwtDecode(sessionStorage.getItem("token")).id;this.$axios({url:"http://110.41.45.5:21888/scoreApi/rank/"+a+"/"+t,method:"get"}).then(function(t){e.form=t.data.data}),this.dialogFormVisible=!0},handleSizeChange:function(t){this.pagination.size=t,this.fromTable()},handleCurrentChange:function(t){this.pagination.current=t,this.fromTable()},fromTable:function(){var t=this,e=this.$jwtDecode(sessionStorage.getItem("token")).id;this.$axios({url:"http://110.41.45.5:21888/scoreApi/rank/"+this.pagination.current+"/"+this.pagination.size+"/"+e,method:"get"}).then(function(e){t.loading=!1,t.rank=e.data.data.records,t.pagination=i()({},e.data.data);var a=[],n=t.error.map(function(t,e){var a={};return a.text=t.answerDate,a.value=t.answerDate,a}).reduce(function(t,e){return!a[e.text]&&(a[e.text]=t.push(e)),t},[]);t.filter=n})}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table"},[a("p",{staticClass:"title"},[t._v("\r\n      成绩详情\r\n    ")]),t._v(" "),a("section",{staticClass:"content-el"},[a("div",[a("label",{staticStyle:{color:"#909399","font-weight":"500"}},[t._v("课程名称：")]),t._v(" "),a("el-input",{staticStyle:{width:"200px","margin-right":"100px"},attrs:{placeholder:"请输入课程名称",clearable:""},model:{value:t.subject,callback:function(e){t.subject=e},expression:"subject"}}),t._v(" "),a("label",{staticStyle:{color:"#909399","font-weight":"500"}},[t._v("考试日期：")]),t._v(" "),a("el-date-picker",{staticStyle:{"margin-right":"100px"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.search}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.loadingExcel,icon:"el-icon-download"},on:{click:t.exportExcel}},[t._v("导出excel")])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"filterTable",attrs:{data:t.rank}},[a("el-table-column",{attrs:{prop:"answerDate",label:"考试日期",sortable:"",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"subject",label:"课程名称",width:"200","filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",[t._v(t._s(e.row.subject))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"mark",label:"成绩",width:"200","filter-placement":"bottom-end"}}),t._v(" "),a("el-table-column",{attrs:{prop:"rank",label:"排名",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\r\n            "+t._s(t.tran(e.row.rank))+"\r\n\r\n            "),a("i",{staticClass:"el-icon-view",on:{click:t.showRank}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"详情",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{on:{click:function(a){return t.showInfo(e.row.examCode)}}},[t._v("查看详情")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:"详情",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"平时成绩:","label-width":"250px"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:""},model:{value:t.form.ptScore,callback:function(e){t.$set(t.form,"ptScore",e)},expression:"form.ptScore"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"期末成绩:","label-width":"250px"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:""},model:{value:t.form.etScore,callback:function(e){t.$set(t.form,"etScore",e)},expression:"form.etScore"}})],1),t._v(" "),a("span",{staticStyle:{color:"red","margin-left":"180px"}},[t._v("*")]),t._v(" "),a("span",[t._v("平时成绩占比"+t._s(String(t.form.rate).split(":")[0]+"0")+"%,期末成绩占比"+t._s(String(t.form.rate).split(":")[1]+"0")+"%")])],1)],1),t._v(" "),a("el-row",{staticClass:"pagination",attrs:{type:"flex",justify:"center",align:"middle"}},[a("el-pagination",{attrs:{"current-page":t.pagination.current,"page-sizes":[4,6,8,10],"page-size":t.pagination.size,layout:"total, sizes, prev, pager, next, jumper",total:t.pagination.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)])},staticRenderFns:[]};var l=a("VU/8")(o,r,!1,function(t){a("TDju")},"data-v-5cae0d40",null);e.default=l.exports}});
//# sourceMappingURL=20.cea2b4f93e107146d801.js.map