{"version":3,"sources":["webpack:///src/components/teacher/addClassMark.vue","webpack:///./src/components/teacher/addClassMark.vue?7114","webpack:///./src/components/teacher/addClassMark.vue"],"names":["addClassMark","data","_this","this","pagination","current","total","size","dialogVisible","form","ptScore","options","value","list","studentname","loading","timer","rules","validator","rule","callback","setTimeout","Error","trigger","created","getStudentInfo","searchData","methods","search","$axios","url","method","subject","studentName","_this2","then","res","map","item","label","remoteMethod","query","_this3","filter","toLowerCase","indexOf","activity","rates","String","rate","split","score","parseFloat","etScore","toFixed","clearInterval","_this4","console","log","catch","error","handleSizeChange","val","handleCurrentChange","checkGrade","studentId","examCode","_this5","setInterval","submit","formName","_this6","$refs","validate","valid","phone","avatar","major","institute","code","$message","message","type","handleClose","done","_this7","$confirm","_","teacher_addClassMark","render","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","color","font-weight","_v","attrs","filterable","remote","reserve-keyword","placeholder","remote-method","clearable","model","$$v","expression","_l","key","width","margin-right","on","click","margin-top","records","border","fixed","prop","scopedSlots","_u","fn","scope","row","state","_s","height","src","$event","current-page","page-sizes","page-size","layout","size-change","current-change","title","visible","before-close","update:visible","ref","label-width","disabled","$set","autocomplete","slot","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/30.c23f3a3e9fd051b742fe.js","sourcesContent":["// 学生管理页面\r\n<template>\r\n  <div class=\"all\">\r\n    <label style=\"color: #909399;\r\n      font-weight: 500;\">考试科目：</label>\r\n       <el-select\r\n    v-model=\"value\"\r\n    filterable\r\n    remote\r\n    reserve-keyword\r\n    placeholder=\"请输入关键词\"\r\n    :remote-method=\"remoteMethod\"\r\n    :loading=\"loading\"\r\n    clearable>\r\n    <el-option\r\n      v-for=\"item in options\"\r\n      :key=\"item.value\"\r\n      :label=\"item.label\"\r\n      :value=\"item.value\">\r\n    </el-option>\r\n   </el-select>\r\n\r\n   \r\n      <!-- <el-input  placeholder=\"请输入考试科目\" style=\"width: 200px;margin-right: 30px;\" v-model=\"subject\" clearable>\r\n        </el-input> -->\r\n        <label style=\"color: #909399;\r\n      font-weight: 500;\">学生姓名：</label>\r\n        <el-input  placeholder=\"请输入学生姓名\" style=\"width: 200px;margin-right: 30px;\" v-model=\"studentname\" clearable>\r\n        </el-input>\r\n        <el-button type=\"primary\" @click=\"search\">查询</el-button>\r\n    <el-table :data=\"pagination.records\" border style=\"margin-top: 20px;\">\r\n        <el-table-column fixed=\"left\" prop=\"studentId\" label=\"学号\" width=\"100\"></el-table-column>\r\n      <el-table-column fixed=\"left\" prop=\"studentName\" label=\"姓名\" width=\"150\"></el-table-column>\r\n      <el-table-column prop=\"institute\" label=\"学院\" width=\"150\"></el-table-column>\r\n      <el-table-column prop=\"major\" label=\"专业\" width=\"150\"></el-table-column>\r\n      <el-table-column prop=\"subject\" label=\"考试科目\" width=\"150\"></el-table-column>\r\n      <el-table-column prop=\"state\" label=\"状态\" width=\"100\">\r\n        <template slot-scope=\"scope\">\r\n          <el-tag :type=\"scope.row.state==='已给平时分' ? 'success' : 'danger'\">{{scope.row.state==='已给平时分'  ? \"已给\" : \"未给予\"}}</el-tag>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"phone\" label=\"联系方式\" width=\"150\"></el-table-column>\r\n      <el-table-column prop=\"avatar\" label=\"头像\" width=\"150\">\r\n        <template slot-scope=\"scope\">\r\n          <el-image :src=\"scope.row.avatar\" style=\"width: 56px;height: 56px;\"></el-image>\r\n        </template>\r\n      </el-table-column>\r\n      <!-- <el-table-column prop=\"examCode\" label=\"试卷编号\" width=\"150\"></el-table-column> -->\r\n      <el-table-column fixed=\"right\" label=\"操作\" width=\"150\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button @click=\"checkGrade(scope.row.studentId,scope.row.examCode)\" type=\"primary\" size=\"small\">编辑</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <el-pagination\r\n      @size-change=\"handleSizeChange\"\r\n      @current-change=\"handleCurrentChange\"\r\n      :current-page=\"pagination.current\"\r\n      :page-sizes=\"[6, 10]\"\r\n      :page-size=\"pagination.size\"\r\n      layout=\"total, sizes, prev, pager, next, jumper\"\r\n      :total=\"pagination.total\"\r\n      class=\"page\">\r\n    </el-pagination>\r\n    <!-- 编辑对话框-->\r\n    <el-dialog\r\n      title=\"设置平时成绩\"\r\n      :visible.sync=\"dialogVisible\"\r\n      width=\"30%\"\r\n      :before-close=\"handleClose\">\r\n      <section class=\"update\">\r\n        <el-form ref=\"form\" :model=\"form\" label-width=\"80px\" :rules=\"rules\"  class=\"demo-ruleForm\">\r\n          <el-form-item label=\"姓名\">\r\n            <el-input v-model=\"form.studentName\" disabled></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"学院\">\r\n            <el-input v-model=\"form.institute\" disabled></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"专业\">\r\n            <el-input v-model=\"form.major\" disabled></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"课程\">\r\n            <el-input v-model=\"form.subject\" disabled></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"平时分与期末占比\">\r\n            <el-input v-model=\"form.rate\" disabled></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"平时分\" prop=\"ptScore\">\r\n            <el-input v-model=\"form.ptScore\"  autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"卷面分\">\r\n            <el-input v-model=\"form.etScore\" disabled></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"总成绩\">\r\n            <el-input v-model=\"form.score\"></el-input>\r\n          </el-form-item>\r\n\r\n        </el-form>\r\n      </section>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"submit('form')\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    var checkPtScore = (rule, value, callback) => {\r\n        \r\n        setTimeout(() => {\r\n         \r\n            if (this.form.ptScore > 100) {\r\n              callback(new Error('不能超过100分'));\r\n            } else {\r\n              callback();\r\n            }\r\n          \r\n        }, 500);\r\n      };\r\n    return {\r\n      pagination: {\r\n        //分页后的考试信息\r\n        current: 1, //当前页\r\n        total: null, //记录条数\r\n        size: 6, //每页条数\r\n      },\r\n      dialogVisible: false, //对话框\r\n      form: {}, //保存点击以后当前的信息\r\n      ptScore:'',\r\n      options: [],\r\n      value: [],\r\n      list: [],\r\n      studentname:'',\r\n      loading: false,\r\n      timer:null,\r\n      rules:{\r\n        ptScore:[\r\n            { validator: checkPtScore, trigger: 'blur'}\r\n        ]\r\n      }\r\n    };\r\n  },\r\n  created() {\r\n    this.getStudentInfo();\r\n    this.searchData()\r\n  },\r\n  methods: {\r\n    search(){\r\n      this.$axios({\r\n          url: '/${process.env.scoreApi}/addClassMark/Search/',\r\n          method: 'post',\r\n          data:{\r\n            subject:\"\",\r\n            studentName:\"\"\r\n          }\r\n        })\r\n    },\r\n    searchData(){\r\n      this.$axios({\r\n          url: '/${process.env.scoreApi}/addClassMark/remoteSearch',\r\n          method: 'get',\r\n       }).then(res=>{\r\n          this.list = res.data.data.map(item => {\r\n          return { value: `value:${item}`, label: `${item}` };\r\n          });\r\n       })\r\n    },\r\n    remoteMethod(query) {\r\n        if (query !== '') {\r\n          this.loading = true;\r\n          setTimeout(() => {\r\n            this.loading = false;\r\n            this.options = this.list.filter(item => {\r\n              return item.label.toLowerCase()\r\n                .indexOf(query.toLowerCase()) > -1;\r\n            });\r\n          }, 500);\r\n        } else {\r\n          this.options = [];\r\n        }\r\n    },\r\n    activity(){\r\n        var rates=String(this.form.rate).split(\":\");\r\n        //console.log(rates[0]+\" \"+rates[1]+\" \")\r\n        if(this.dialogVisible==true)\r\n        {        \r\n            // console.log(this.form.ptScore+\" \"+rates[0]+\" \"+this.form.etScore+\" \"+rates[1]+\" \")\r\n            this.form.score=(parseFloat(this.form.ptScore*rates[0]+this.form.etScore*rates[1])/10).toFixed(2);         \r\n        }else\r\n            clearInterval(this.timer)\r\n\r\n    },\r\n    getStudentInfo() {\r\n      //分页查询所有试卷信息\r\n      this.$axios(`/${process.env.scoreApi}/addClassMark/${this.pagination.current}/${this.pagination.size}`).then(res => {\r\n        this.pagination = res.data.data;\r\n        console.log(this.pagination)\r\n      }).catch(error => {});\r\n    },\r\n    //改变当前记录条数\r\n    handleSizeChange(val) {\r\n      this.pagination.size = val;\r\n      this.getStudentInfo();\r\n    },\r\n    //改变当前页码，重新发送请求\r\n    handleCurrentChange(val) {\r\n      this.pagination.current = val;\r\n      this.getStudentInfo();\r\n    },\r\n    checkGrade(studentId,examCode) { //修改学生信息\r\n        var that =this\r\n        this.dialogVisible = true\r\n        this.$axios(`/${process.env.scoreApi}/addClassMark/modify/${studentId}/${examCode}`).then(res => {\r\n          this.form = res.data.data\r\n          this.timer=setInterval(()=>{\r\n          this.activity()\r\n          },500)\r\n      })\r\n    },\r\n    submit(formName) { //提交更改\r\n        this.$refs[formName].validate((valid) => {\r\n            if(valid){\r\n                this.dialogVisible = false\r\n                this.$axios({\r\n                    url: '/${process.env.scoreApi}/addClassMark',\r\n                    method: 'put',\r\n                    data: {\r\n                        studentId:this.form.studentId,\r\n                        studentName:this.form.studentName,\r\n                        examCode:this.form.examCode,\r\n                        subject:this.form.subject,\r\n                        ptScore:this.form.ptScore,\r\n                        etScore:this.form.etScore,\r\n                        score:this.form.score,\r\n                        phone:this.form.phone,\r\n                        rate:this.form.rate,\r\n                        avatar:this.form.avatar,\r\n                        major:this.form.major,\r\n                        institute:this.form.institute\r\n                    }\r\n                }).then(res => {\r\n                    console.log(res)\r\n                    if(res.data.code ==200) {\r\n                    this.$message({\r\n                        message: '更新成功',\r\n                        type: 'success'\r\n                    })\r\n                    }\r\n                    this.getStudentInfo()\r\n                })\r\n            }\r\n            else{\r\n                console.log('error submit!!');\r\n                return false;\r\n            }\r\n        })\r\n      \r\n    },\r\n    handleClose(done) { //关闭提醒\r\n      this.$confirm('确认关闭？')\r\n        .then(_ => {\r\n          done(); \r\n          this.activity()\r\n        }).catch(_ => {});\r\n    },\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.all {\r\n  padding: 0px 40px;\r\n  .page {\r\n    margin-top: 20px;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n  .edit {\r\n    margin-left: 20px;\r\n  }\r\n  .el-table tr {\r\n    background-color: #dd5862 !important;\r\n  }\r\n}\r\n.el-table .warning-row {\r\n  background: #000 !important;\r\n}\r\n\r\n.el-table .success-row {\r\n  background: #dd5862;\r\n}\r\n.avatar-uploader .el-upload {\r\n    border: 1px dashed #d9d9d9;\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n    position: relative;\r\n    overflow: hidden;\r\n    border-color: #409EFF;\r\n  }\r\n  .avatar-uploader .el-upload:hover {\r\n    border-color: #409EFF;\r\n  }\r\n  .avatar-uploader-icon {\r\n    font-size: 28px;\r\n    color: #8c939d;\r\n    width: 178px;\r\n    height: 178px;\r\n    line-height: 178px;\r\n    text-align: center;\r\n    border-color: #409EFF;\r\n  }\r\n  .avatar {\r\n    width: 178px;\r\n    height: 178px;\r\n    display: block;\r\n    border-color: #409EFF;\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/teacher/addClassMark.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"all\"},[_c('label',{staticStyle:{\"color\":\"#909399\",\"font-weight\":\"500\"}},[_vm._v(\"考试科目：\")]),_vm._v(\" \"),_c('el-select',{attrs:{\"filterable\":\"\",\"remote\":\"\",\"reserve-keyword\":\"\",\"placeholder\":\"请输入关键词\",\"remote-method\":_vm.remoteMethod,\"loading\":_vm.loading,\"clearable\":\"\"},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}},_vm._l((_vm.options),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1),_vm._v(\" \"),_c('label',{staticStyle:{\"color\":\"#909399\",\"font-weight\":\"500\"}},[_vm._v(\"学生姓名：\")]),_vm._v(\" \"),_c('el-input',{staticStyle:{\"width\":\"200px\",\"margin-right\":\"30px\"},attrs:{\"placeholder\":\"请输入学生姓名\",\"clearable\":\"\"},model:{value:(_vm.studentname),callback:function ($$v) {_vm.studentname=$$v},expression:\"studentname\"}}),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.search}},[_vm._v(\"查询\")]),_vm._v(\" \"),_c('el-table',{staticStyle:{\"margin-top\":\"20px\"},attrs:{\"data\":_vm.pagination.records,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"fixed\":\"left\",\"prop\":\"studentId\",\"label\":\"学号\",\"width\":\"100\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"fixed\":\"left\",\"prop\":\"studentName\",\"label\":\"姓名\",\"width\":\"150\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"institute\",\"label\":\"学院\",\"width\":\"150\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"major\",\"label\":\"专业\",\"width\":\"150\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"subject\",\"label\":\"考试科目\",\"width\":\"150\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"state\",\"label\":\"状态\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tag',{attrs:{\"type\":scope.row.state==='已给平时分' ? 'success' : 'danger'}},[_vm._v(_vm._s(scope.row.state==='已给平时分'  ? \"已给\" : \"未给予\"))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"phone\",\"label\":\"联系方式\",\"width\":\"150\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"avatar\",\"label\":\"头像\",\"width\":\"150\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-image',{staticStyle:{\"width\":\"56px\",\"height\":\"56px\"},attrs:{\"src\":scope.row.avatar}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"fixed\":\"right\",\"label\":\"操作\",\"width\":\"150\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.checkGrade(scope.row.studentId,scope.row.examCode)}}},[_vm._v(\"编辑\")])]}}])})],1),_vm._v(\" \"),_c('el-pagination',{staticClass:\"page\",attrs:{\"current-page\":_vm.pagination.current,\"page-sizes\":[6, 10],\"page-size\":_vm.pagination.size,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.pagination.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}}),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"设置平时成绩\",\"visible\":_vm.dialogVisible,\"width\":\"30%\",\"before-close\":_vm.handleClose},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('section',{staticClass:\"update\"},[_c('el-form',{ref:\"form\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.form,\"label-width\":\"80px\",\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"label\":\"姓名\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.form.studentName),callback:function ($$v) {_vm.$set(_vm.form, \"studentName\", $$v)},expression:\"form.studentName\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"学院\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.form.institute),callback:function ($$v) {_vm.$set(_vm.form, \"institute\", $$v)},expression:\"form.institute\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"专业\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.form.major),callback:function ($$v) {_vm.$set(_vm.form, \"major\", $$v)},expression:\"form.major\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"课程\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.form.subject),callback:function ($$v) {_vm.$set(_vm.form, \"subject\", $$v)},expression:\"form.subject\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"平时分与期末占比\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.form.rate),callback:function ($$v) {_vm.$set(_vm.form, \"rate\", $$v)},expression:\"form.rate\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"平时分\",\"prop\":\"ptScore\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.form.ptScore),callback:function ($$v) {_vm.$set(_vm.form, \"ptScore\", $$v)},expression:\"form.ptScore\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"卷面分\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.form.etScore),callback:function ($$v) {_vm.$set(_vm.form, \"etScore\", $$v)},expression:\"form.etScore\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"总成绩\"}},[_c('el-input',{model:{value:(_vm.form.score),callback:function ($$v) {_vm.$set(_vm.form, \"score\", $$v)},expression:\"form.score\"}})],1)],1)],1),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submit('form')}}},[_vm._v(\"确 定\")])],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2dd38140\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/teacher/addClassMark.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2dd38140\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./addClassMark.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./addClassMark.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./addClassMark.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2dd38140\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./addClassMark.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2dd38140\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/teacher/addClassMark.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}