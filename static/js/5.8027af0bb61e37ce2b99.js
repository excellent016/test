webpackJsonp([5],{"9bBU":function(e,t,a){a("mClu");var l=a("FeBl").Object;e.exports=function(e,t,a){return l.defineProperty(e,t,a)}},C4MV:function(e,t,a){e.exports={default:a("9bBU"),__esModule:!0}},UenE:function(e,t){},bOdI:function(e,t,a){"use strict";t.__esModule=!0;var l,o=a("C4MV"),r=(l=o)&&l.__esModule?l:{default:l};t.default=function(e,t,a){return t in e?(0,r.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},eK6F:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("bOdI"),o=a.n(l),r={data:function(){return o()({form:{studentName:null,grade:null,major:null,clazz:null,institute:null,tel:null,email:null,cardId:null,sex:null,role:2},ruleForm2:{},imageUrl:"",loadingDemo:!1,act:"/otherApi/importStudent",headers:{"Content-Type":"multipart/form-data;charset=UTF-8"}},"headers",{token:sessionStorage.getItem("token")})},methods:{downloadDemo:function(){var e=this;setTimeout(function(){console.log("已经下载了2秒");var t=document.createElement("a"),a="https://exam-xr.oss-cn-hangzhou.aliyuncs.com/online_exam/2024/01/20/%E5%AF%BC%E5%85%A5%E5%AD%A6%E7%94%9F%E6%A8%A1%E6%9D%BF.xlsx";t.href=a,t.download="导入学生模板.xlsx",t.click(),URL.revokeObjectURL(a),e.$message({type:"success",message:"下载成功"}),e.loadingDemo=!1},1e3),this.loadingDemo=!0},beforeUpload:function(e){var t=String(e.name);return"xlsx"==t.substring(t.lastIndexOf(".")+1,t.length)||"xls"==t.substring(t.lastIndexOf(".")+1,t.length)||(this.$message({message:"文件类型不匹配，建议检查文件",type:"error"}),!1)},handleSuccess1:function(e,t,a){400==e.code&&this.$message({message:"导入学生成功",type:"success"}),200==e.code&&(this.$message({message:e.message,type:"error"}),this.$refs.upload.clearFiles())},handleAvatarSuccess:function(e,t){this.imageUrl=e.data},beforeAvatarUpload:function(e){var t=e.size/1024/1024<2;return t||this.$message.error("上传头像图片大小不能超过 2MB!"),t},onSubmit:function(){var e=this;this.$axios({url:"/peopleApi/student",method:"post",data:{studentName:this.form.studentName,grade:this.form.grade,major:this.form.major,clazz:this.form.clazz,institute:this.form.institute,tel:this.form.tel,email:this.form.email,pwd:"123456",cardId:this.form.cardId,sex:this.form.sex,role:2,avatar:this.imageUrl}}).then(function(t){200==t.data.code&&(e.$message({message:"数据添加成功",type:"success"}),e.$router.push({path:"/studentManage"}))})},cancel:function(){this.form={}}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"add"},[a("div",{staticStyle:{"margin-left":"150px"}},[a("el-tabs",{staticStyle:{width:"1000px","background-color":"#eee",height:"500px"},attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"单次添加"}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",inline:!0,rules:e.rules2}},[a("el-form-item",{attrs:{label:"学号"}},[a("el-input",{model:{value:e.form.studentId,callback:function(t){e.$set(e.form,"studentId",t)},expression:"form.studentId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{model:{value:e.form.studentName,callback:function(t){e.$set(e.form,"studentName",t)},expression:"form.studentName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别"}},[a("el-input",{model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"学院"}},[a("el-input",{model:{value:e.form.institute,callback:function(t){e.$set(e.form,"institute",t)},expression:"form.institute"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属专业"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:e.form.major,callback:function(t){e.$set(e.form,"major",t)},expression:"form.major"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"年级"}},[a("el-input",{model:{value:e.form.grade,callback:function(t){e.$set(e.form,"grade",t)},expression:"form.grade"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"班级"}},[a("el-input",{model:{value:e.form.clazz,callback:function(t){e.$set(e.form,"clazz",t)},expression:"form.clazz"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话号码"}},[a("el-input",{model:{value:e.form.tel,callback:function(t){e.$set(e.form,"tel",t)},expression:"form.tel"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"身份证号"}},[a("el-input",{model:{value:e.form.cardId,callback:function(t){e.$set(e.form,"cardId",t)},expression:"form.cardId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱"}},[a("el-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"头像"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/otherApi/upload","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-left":"380px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit()}}},[e._v("立即创建")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.cancel()}}},[e._v("取消")])],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"批量添加"}},[a("div",{staticStyle:{"margin-bottom":"10px",float:"left","margin-left":"300px","padding-top":"10px"}},[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("注：需要按照模板进行导入")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"50px","margin-bottom":"30px"},attrs:{type:"primary",loading:e.loadingDemo,icon:"el-icon-download"},on:{click:e.downloadDemo}},[e._v("下载模板")]),e._v(" "),a("el-upload",{ref:"upload",staticClass:"upload-demo",staticStyle:{"text-align":"center"},attrs:{action:e.act,drag:"",multiple:"",headers:e.headers,"on-success":e.handleSuccess1,"before-upload":e.beforeUpload}},[a("i",{staticClass:"el-icon-upload",staticStyle:{"font-size":"150px","margin-top":"60px"}}),e._v(" "),a("div",{staticClass:"el-upload__text",staticStyle:{"font-size":"20px","margin-top":"20px"}},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])])])],1)],1)],1)])},staticRenderFns:[]};var n=a("VU/8")(r,s,!1,function(e){a("UenE")},"data-v-4f85441a",null);t.default=n.exports},mClu:function(e,t,a){var l=a("kM2E");l(l.S+l.F*!a("+E39"),"Object",{defineProperty:a("evD5").f})}});
//# sourceMappingURL=5.8027af0bb61e37ce2b99.js.map