webpackJsonp([8],{"88/A":function(e,t){},dfEE:function(e,t,o){e.exports=o.p+"static/img/logo.6539fb6.jpeg"},mvHQ:function(e,t,o){e.exports={default:o("qkKv"),__esModule:!0}},qkKv:function(e,t,o){var s=o("FeBl"),a=s.JSON||(s.JSON={stringify:JSON.stringify});e.exports=function(e){return a.stringify.apply(a,arguments)}},uIdB:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=o("mvHQ"),a=o.n(s),i=o("Dd8w"),n=o.n(i),r=(o("4Nz2"),o("NYxO")),l=o("J150"),g={name:"login",data:function(){return{rotate:Math.floor(100*Math.random()+220),value3:0,isShow:!0,noShow:!1,role:2,valid:1111,time:60,isTouch:!1,loading:null,imageSrc:"",imageUrl:"",imageShow:!1,countdown:!1,labelPosition:"left",formLabelAlign:{username:"20154084",password:"123456",verify:""},verifyBackend:""}},methods:{showImage:function(){var e=this;this.$axios({url:"/http://110.41.45.5:21885/getVerifiCodeImage/"+this.formLabelAlign.username,method:"get",responseType:"blob"}).then(function(t){var o=URL.createObjectURL(new Blob([t.data]));e.imageSrc=o})},downTime:function(){var e=this,t=setInterval(function(){e.time--,e.countdown=!0,0==e.time&&(clearInterval(t),e.time=60,e.noShow=!1,e.isShow=!0,e.countdown=!1)},1e3)},handleClose:function(e){e()},send:function(){var e=this;this.isTouch=!0,this.rotate=Math.floor(130*Math.random()+120),sessionStorage.setItem("rotate",this.rotate),this.$axios({url:"http://110.41.45.5:21885/rorate",method:"get"}).then(function(t){e.imageUrl=t.data.data})},changeSlider:function(e){this.value3=0,this.rotate=sessionStorage.getItem("rotate")},Loading:function(){this.loading=this.$loading({lock:!1,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)",css:{fontSize:"60px",lineHeight:"50px",padding:"10px",margin:"20px"}})},all:function(e){var t=this;0==this.value3&&(this.rotate=sessionStorage.getItem("rotate"),sessionStorage.setItem("nowValue",0));var o=sessionStorage.getItem("nowValue"),s=this.value3;if(sessionStorage.setItem("nowValue",this.value3),this.rotate=s>o?Math.floor(this.rotate)+s-o:Math.floor(this.rotate)-(o-s),console.log(Math.abs(360-this.rotate)),Math.abs(360-this.rotate)<=5){this.isTouch=!1,this.rotate=0;var a=this.formLabelAlign.username;this.$axios({url:"/http://110.41.45.5:21885/send/"+a,method:"get"}).then(function(e){console.log(e.data.data),t.valid=e.data.data,200==e.data.code&&(t.$message({type:"success",message:"验证码已发送到你的邮箱"}),t.isShow=!1,t.noShow=!0,t.noShow&&t.downTime()),400==e.data.code&&(t.isShow=!1,t.noShow=!1,t.imageShow=!0,t.showImage())}).catch(function(){t.$message({type:"error",message:"网络出差了"})})}},login:function(){""!=this.formLabelAlign.verify?(this.countdown&&(console.log("登录操作执行-------"),null==sessionStorage.getItem("token")?this.Login():this.$jwtDecode(sessionStorage.getItem("token")).id!=this.formLabelAlign.username?this.Login():this.LoginNew(),0==this.time&&(this.$message({type:"error",message:"验证码已失效,请重新发送"}),this.formLabelAlign.verify="")),this.countdown||(console.log("登录操作执行-------"),null==sessionStorage.getItem("token")?this.Login():this.$jwtDecode(sessionStorage.getItem("token")).id!=this.formLabelAlign.username?this.Login():this.LoginNew())):this.$message({type:"error",message:"验证码不能为空"})},LoginNew:function(){var e=this;this.Loading(),this.$axios({url:"/http://110.41.45.5:21886/loginNew",method:"post",data:n()({},this.formLabelAlign)}).then(function(t){if(e.loading.close(),200==t.data.code){var o=t.data.data;if(null!=o)switch(o.role){case"0":sessionStorage.setItem("role",0),console.log(Object(l.a)(o.token)),sessionStorage.setItem("token",o.token),sessionStorage.setItem("image",e.$jwtDecode(sessionStorage.getItem("token")).image),e.$router.push({path:"/index"});break;case"1":sessionStorage.setItem("token",o.token),sessionStorage.setItem("image",e.$jwtDecode(sessionStorage.getItem("token")).image),sessionStorage.setItem("role",1),e.$router.push({path:"/index"});break;case"2":sessionStorage.setItem("token",o.token),console.log(e.$jwtDecode(sessionStorage.getItem("token"))),e.$router.push({path:"/student"}),sessionStorage.setItem("image",e.$jwtDecode(sessionStorage.getItem("token")).image)}}300==t.data.code&&(e.$message({message:"验证码错误",type:"error"}),e.showImage(),e.formLabelAlign.verify=""),301==t.data.code&&(e.$message({message:"验证码过期",type:"error"}),e.showImage(),e.formLabelAlign.verify=""),450==t.data.code&&e.$message({message:"请求超时",type:"error"})})},Login:function(){var e=this;this.Loading(),this.$axios({url:"/http://110.41.45.5:21886/login",method:"post",data:n()({},this.formLabelAlign)}).then(function(t){if(e.loading.close(),200==t.data.code){var o=t.data.data;if(null!=o)switch(o.role){case"0":sessionStorage.setItem("role",0),console.log(Object(l.a)(o.token)),sessionStorage.setItem("token",o.token),sessionStorage.setItem("image",e.$jwtDecode(sessionStorage.getItem("token")).image),e.$router.push({path:"/index"});break;case"1":sessionStorage.setItem("token",o.token),sessionStorage.setItem("image",e.$jwtDecode(sessionStorage.getItem("token")).image),sessionStorage.setItem("role",1),e.$router.push({path:"/index"});break;case"2":sessionStorage.setItem("token",o.token),sessionStorage.setItem("image",e.$jwtDecode(sessionStorage.getItem("token")).image),console.log(e.$jwtDecode(sessionStorage.getItem("token"))),e.$router.push({path:"/student"})}}if(301==t.data.code&&(e.$message({type:"error",message:"验证码过期,请重新输入"}),e.showImage(),e.formLabelAlign.verify=""),300==t.data.code&&(e.$message({type:"error",message:"验证码错误,请重新输入"}),e.showImage(),e.formLabelAlign.verify=""),400==t.data.code){var s=new WebSocket(e.$websocketUrl,t.data.data.currentId),i={};i.sender=t.data.data.currentId,i.receiver=t.data.data.wantLogin,i.message="is_lock",console.log(s.readyState),1===s.readyState?s.send(a()(i)):0===s.readyState?setTimeout(function(){s.send(a()(i))},300):setTimeout(function(){s.send(a()(i))},500),e.$message({showClose:!0,type:"error",message:t.data.message})}450==t.data.code&&e.$message({showClose:!0,type:"error",message:t.data.message})})},clickTag:function(e){this.role=e}},computed:Object(r.c)(["userInfo"]),mounted:function(){}},m={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"login"}},[s("div",{staticClass:"bg"}),e._v(" "),s("el-row",{staticClass:"main-container"},[s("div",{staticClass:"leftAside",staticStyle:{width:"600px",height:"490px","margin-left":"100px","margin-top":"119px"}},[s("img",{staticStyle:{width:"610px",height:"471px","border-radius":"2%"},attrs:{src:o("dfEE")}})]),e._v(" "),s("el-col",{attrs:{lg:8,xs:16,md:10,span:10}},[s("div",{staticClass:"bottom",staticStyle:{"margin-top":"100px",width:"400px","margin-left":"0px"}},[s("div",{staticClass:"container"},[s("div",{staticClass:"top",staticStyle:{"margin-top":"30px"}},[s("i",{staticClass:"iconfont icon-kaoshi"}),s("span",{staticClass:"title"},[e._v("在线考试系统")])]),e._v(" "),s("div",[s("span",[s("sub",{staticStyle:{"font-size":"20px","margin-top":"10px",color:"#ff962a","font-family":"'Courier New', Courier, monospace","text-align":"center","margin-left":"70px"}},[e._v("Online-Exam-System")])])]),e._v(" "),s("p",{staticClass:"title"}),e._v(" "),s("el-form",{attrs:{"label-position":e.labelPosition,"label-width":"80px",model:e.formLabelAlign}},[s("el-form-item",{attrs:{label:"用户名:"}},[s("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.formLabelAlign.username,callback:function(t){e.$set(e.formLabelAlign,"username",e._n(t))},expression:"formLabelAlign.username"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"密  码:"}},[s("el-input",{attrs:{placeholder:"请输入密码",type:"password"},model:{value:e.formLabelAlign.password,callback:function(t){e.$set(e.formLabelAlign,"password",t)},expression:"formLabelAlign.password"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"验证码:"}},[s("el-input",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticStyle:{width:"120px"},attrs:{placeholder:"请输入验证码"},model:{value:e.formLabelAlign.verify,callback:function(t){e.$set(e.formLabelAlign,"verify",t)},expression:"formLabelAlign.verify"}}),e._v(" "),s("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticStyle:{width:"80px","margin-left":"30px","padding-right":"80px"},attrs:{type:"primary"},on:{click:e.send}},[e._v("点我发送")]),e._v(" "),s("el-input",{directives:[{name:"show",rawName:"v-show",value:e.noShow,expression:"noShow"}],staticStyle:{width:"120px"},attrs:{placeholder:"请输入验证码"},model:{value:e.formLabelAlign.verify,callback:function(t){e.$set(e.formLabelAlign,"verify",t)},expression:"formLabelAlign.verify"}}),e._v(" "),s("el-button",{directives:[{name:"show",rawName:"v-show",value:e.noShow,expression:"noShow"}],staticStyle:{width:"80px","margin-left":"30px","padding-left":"40px","padding-right":"40px","text-align":"center"},attrs:{type:"primary"}},[e._v(e._s(e.time))]),e._v(" "),s("el-dialog",{attrs:{title:"请把图片旋转到正常角度",visible:e.isTouch,width:"20%","before-close":e.handleClose},on:{"update:visible":function(t){e.isTouch=t}}},[s("div",[s("img",{staticStyle:{width:"30%",height:"30%","border-radius":"50%","margin-left":"70px"},style:{transform:"rotate("+e.rotate+"deg)"},attrs:{src:e.imageUrl}}),e._v(" "),s("el-slider",{attrs:{min:0,max:360,"show-tooltip":!1},on:{input:function(t){return e.all(t)},change:function(t){return e.changeSlider(t)}},model:{value:e.value3,callback:function(t){e.value3=t},expression:"value3"}})],1)]),e._v(" "),s("el-input",{directives:[{name:"show",rawName:"v-show",value:e.imageShow,expression:"imageShow"}],staticStyle:{width:"120px",float:"left"},attrs:{placeholder:"请输入验证码"},model:{value:e.formLabelAlign.verify,callback:function(t){e.$set(e.formLabelAlign,"verify",t)},expression:"formLabelAlign.verify"}}),e._v(" "),s("el-image",{directives:[{name:"show",rawName:"v-show",value:e.imageShow,expression:"imageShow"}],staticStyle:{float:"right",width:"100px",height:"38px","margin-left":"50px"},attrs:{src:e.imageSrc,title:"点我刷新"},on:{click:e.showImage}})],1),e._v(" "),s("div",{staticClass:"submit"},[s("el-button",{staticClass:"row-login",attrs:{type:"primary"},on:{click:function(t){return e.login()}}},[e._v("登录")])],1)],1)],1)])])],1),e._v(" "),s("el-row",{staticClass:"footer"},[s("el-col",[s("p",{staticClass:"msg2"},[e._v("版权所有 ©2023 保留所有权利  "),s("a",{attrs:{href:"http://beian.miit.gov.cn/",target:"_blank"}},[e._v("赣ICP备19001371号")])])])],1)],1)},staticRenderFns:[]};var c=o("VU/8")(g,m,!1,function(e){o("88/A")},"data-v-3ed29819",null);t.default=c.exports}});
//# sourceMappingURL=8.7dd3c5cc6daa7aab6079.js.map